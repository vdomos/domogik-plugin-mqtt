{ 
    "identity": {
        "author": "domos", 
        "author_email": "domos.vesta at gmail.com", 
        "tags": ["protocole", "messaging"], 
        "dependencies": [
            {   
                "id": "Mosquitto server",
                "type": "package"
            },
            {   
                "id": "paho-mqtt (>=1.1)",
                "type": "python"
            }
        ],
        "description": "Domogik Plugin to subscribe or publish MQTT messages.",
        "domogik_min_version": "0.5.0", 
        "name": "mqtt", 
        "type": "plugin", 
        "version": "3.0"
    }, 
    
    "products" : [], 
    
    "configuration": [
        {
            "default": "localhost",
            "description": "MQTT (Mosquitto) server host",
            "key": "mqtt_host",
            "name" : "MQTT Host",
            "required": true,
            "type": "string"
        },
        {
            "default": "1883",
            "description": "MQTT (Mosquitto) server Port",
            "key": "mqtt_port",
            "name" : "MQTT Port",
            "required": true,
            "type": "integer"
        },
        {
            "key": "mqtt_protocol", 
            "name": "MQTT protocol",
            "default": "MQTTv311", 
            "description": "Select MQTTv31 protocol for old Mosquitto version", 
            "required": "yes", 
            "type": "choice",
            "choices" : {
                "MQTTv311" : "MQTTv311",
                "MQTTv31" : "MQTTv31"
            }
        }    
    ], 
    
    "device_types": {
        "mqtt.sensor_temperature": {
            "description": "", 
            "id": "mqtt.sensor_temperature", 
            "name": "Temperature sensor",
            "commands": [],
            "sensors": ["temperature"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_humidity": {
            "description": "", 
            "id": "mqtt.sensor_humidity", 
            "name": "Humidity sensor",
            "commands": [],
            "sensors": ["humidity"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_scaling": {
            "description": "", 
            "id": "mqtt.sensor_scaling", 
            "name": "Scaling sensor",
            "commands": [],
            "sensors": ["scaling"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_brightness": {
            "description": "", 
            "id": "mqtt.sensor_brightness", 
            "name": "Brightness sensor",
            "commands": [],
            "sensors": ["brightness"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_pressure": {
            "description": "", 
            "id": "mqtt.sensor_pressure", 
            "name": "Pressure sensor",
            "commands": [],
            "sensors": ["pressure"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_power": {
            "description": "", 
            "id": "mqtt.sensor_power", 
            "name": "Power sensor",
            "commands": [],
            "sensors": ["power"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_level": {
            "description": "", 
            "id": "mqtt.sensor_level", 
            "name": "Level sensor",
            "commands": [],
            "sensors": ["level"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_value": {
            "description": "", 
            "id": "mqtt.sensor_value", 
            "name": "Value sensor",
            "commands": [],
            "sensors": ["value"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_switch": {
            "description": "", 
            "id": "mqtt.sensor_switch", 
            "name": "Switch sensor",
            "commands": [],
            "sensors": ["switch"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_opening": {
            "description": "", 
            "id": "mqtt.sensor_opening", 
            "name": "Opening sensor",
            "commands": [],
            "sensors": ["opening"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_state": {
            "description": "", 
            "id": "mqtt.sensor_state", 
            "name": "State sensor",
            "commands": [],
            "sensors": ["state"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_motion": {
            "description": "", 
            "id": "mqtt.sensor_motion", 
            "name": "Motion sensor",
            "commands": [],
            "sensors": ["motion"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.sensor_string": {
            "description": "", 
            "id": "mqtt.sensor_string", 
            "name": "String sensor",
            "commands": [],
            "sensors": ["string"],
            "parameters": [
                {
                    "description": "MQTT topic to subscribe (ex.: domogik, domogik/sensor ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.cmd_switch": {
            "description": "", 
            "id": "mqtt.cmd_switch", 
            "name": "Switch command",
            "commands": ["switch"],
            "sensors": ["switch"],
            "parameters": [
                {
                    "description": "MQTT topic for publishing (ex.: domogik, domogik/command ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.cmd_value": {
            "description": "", 
            "id": "mqtt.cmd_value", 
            "name": "Value command",
            "commands": ["value"],
            "sensors": ["value"],
            "parameters": [
                {
                    "description": "MQTT topic for publishing (ex.: domogik, domogik/command ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.cmd_scaling": {
            "description": "", 
            "id": "mqtt.cmd_scaling", 
            "name": "Scaling command",
            "commands": ["scaling"],
            "sensors": ["scaling"],
            "parameters": [
                {
                    "description": "MQTT topic for publishing (ex.: domogik, domogik/command ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        },
        "mqtt.cmd_string": {
            "description": "", 
            "id": "mqtt.cmd_string", 
            "name": "String command",
            "commands": ["string"],
            "sensors": ["string"],
            "parameters": [
                {
                    "description": "MQTT topic for publishing (ex.: domogik, domogik/command ...)",
                    "key": "topic",
                    "xpl" : false,
                    "type": "string"
                },
                {
                    "description": "MQTT Qos (Quality of service level to use => 0..2)",
                    "key": "qos",
                    "xpl" : false,
                    "type": "string",
                    "default": "0"
                }
            ]
        }
    }, 

    "commands": { 
        "switch" : {
            "name" : "Switch",
            "return_confirmation" : true,
            "parameters" : [
                {
                    "key" : "value",
                    "data_type" : "DT_Switch",
                    "conversion" : ""
                }
            ]
        },
        "value" : {
            "name" : "Value",
            "return_confirmation" : true,
            "parameters" : [
                {
                    "key" : "value",
                    "data_type" : "DT_Number",
                    "conversion" : ""
                }
            ]
        },
        "scaling" : {
            "name" : "Scaling",
            "return_confirmation" : true,
            "parameters" : [
                {
                    "key" : "value",
                    "data_type" : "DT_Scaling",
                    "conversion" : ""
                }
            ]
        },
        "string" : {
            "name" : "String",
            "return_confirmation" : true,
            "parameters" : [
                {
                    "key" : "value",
                    "data_type" : "DT_String",
                    "conversion" : ""
                }
            ]
        }
    },

    "sensors": {
        "temperature": {
            "name": "Temperature",
            "incremental" : false,
            "data_type": "DT_Temp",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "humidity": {
            "name": "Humidity",
            "incremental" : false,
            "data_type": "DT_Humidity",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "scaling": {
            "name": "Scalling",
            "incremental" : false,
            "data_type": "DT_Scaling",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "brightness": {
            "name": "Brightness",
            "incremental" : false,
            "data_type": "DT_Brightness",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "pressure": {
            "name": "Pressure",
            "incremental" : false,
            "data_type": "DT_mbarPressure",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "power": {
            "name": "Power",
            "incremental" : false,
            "data_type": "DT_Power",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "level": {
            "name": "Level",
            "incremental" : false,
            "data_type": "DT_Number",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "value": {
            "name": "Value",
            "incremental" : false,
            "data_type": "DT_Number",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "switch": {
            "name": "Switch",
            "incremental" : false,
            "data_type": "DT_Switch",
            "conversion": "",
            "timeout" : 3600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },   
        "opening": {
            "name": "Opening",
            "incremental" : false,
            "data_type": "DT_OpenClose",
            "conversion": "",
            "timeout" : 3600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "state": {
            "name": "State",
            "incremental" : false,
            "data_type": "DT_Bool",
            "conversion": "",
            "timeout" : 3600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "motion": {
            "name": "Motion",
            "incremental" : false,
            "data_type": "DT_Motion",
            "conversion": "",
            "timeout" : 3600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        },
        "string": {
            "name": "String",
            "incremental" : false,
            "data_type": "DT_String",
            "conversion": "",
            "timeout" : 600,
            "history": {
                "store": true,
                "duplicate" : false,
                "max": 0,
                "expire": 0,
                "round_value": 0
            }
        }
    },

    "xpl_commands": {},     
    "xpl_stats": {}, 

    "json_version": 2
}
